<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Manrope%3Awght%40400%3B500%3B700%3B800&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
<title>Fagaz - Nueva Operación</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link rel="stylesheet" href="../common/styles.css" />
<style>
  :root {
    --primary-color: #53d22c;
    --secondary-color: #ebf2e9;
    --text-primary: #121a0f;
    --text-secondary: #639155;
    --border-color: #d6e5d2;
    --background-color: #f9fbf9;
  }
  body {
    font-family: 'Manrope', sans-serif;
  }
  .btn-primary {
    background: var(--primary-color);
    color: var(--text-primary);
    transition: background 0.2s;
  }
  .btn-primary:hover {
    background: #43b91e;
  }
  .btn-secondary {
    background: var(--secondary-color);
    color: var(--text-primary);
    transition: background 0.2s;
  }
  .btn-secondary:hover {
    background: #d6e5d2;
  }
  .input-field {
    width: 100%;
    border-radius: 0.5rem;
    border: 1px solid var(--border-color);
    background: var(--background-color);
    color: var(--text-primary);
    height: 3rem;
    padding: 0 1rem;
    font-size: 1rem;
  }
  .label-text {
    font-size: 0.95rem;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 0.25rem;
  }
  @media (max-width: 640px) {
    main {
      padding-left: 0 !important;
      padding-right: 0 !important;
    }
    .max-w-2xl, .bg-white {
      max-width: 100vw !important;
      border-radius: 0 !important;
      padding: 0.5rem 0.5rem 2rem 0.5rem !important;
      box-shadow: none !important;
    }
    .text-2xl, .text-3xl {
      font-size: 1.3rem !important;
    }
    .h-12, .h-10 {
      height: 3.2rem !important;
    }
    .btn-primary, .btn-secondary {
      font-size: 1.1rem !important;
      padding: 1rem 0.5rem !important;
      width: 100% !important;
      min-width: 0 !important;
    }
    .space-y-6 > * + * {
      margin-top: 1.2rem !important;
    }
    .mb-8 {
      margin-bottom: 1.5rem !important;
    }
    form {
      padding: 0 !important;
    }
    .pt-4.flex.justify-end {
      padding-top: 0.5rem !important;
      justify-content: center !important;
    }
  }
</style>
</head>
<body class="bg-[var(--background-color)] text-[var(--text-primary)]">
<div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">
<header id="header"></header>
<main class="flex-1 px-0 sm:px-6 md:px-10 lg:px-20 xl:px-40 py-8">
<div class="max-w-2xl w-full mx-auto bg-white p-4 sm:p-8 rounded-xl shadow-lg">
<h2 class="text-[var(--text-primary)] text-2xl sm:text-3xl font-bold leading-tight mb-8 text-center">Nueva Operación de Fumigación</h2>
<form class="space-y-6" id="nuevaOperacionForm">
<div>
<label class="label-text block" for="cliente">Cliente</label>
<select class="input-field form-select" id="cliente" name="cliente" required>
<option value="">Seleccionar Cliente</option>
<option value="cliente1">Cliente A</option>
<option value="cliente2">Cliente B</option>
<option value="cliente3">Cliente C</option>
</select>
</div>
<div>
<label class="label-text block" for="area_tipo">Tipo de Área</label>
<select class="input-field form-select" id="area_tipo" name="area_tipo" required>
<option value="">Seleccionar Tipo de Área</option>
<option value="silo">Silo</option>
<option value="celda">Celda</option>
</select>
</div>
<div class="hidden" id="silo_selector_container">
<label class="label-text block" for="silo_selector">Silo</label>
<select class="input-field form-select" id="silo_selector" name="silo_selector">
<option value="">Seleccionar Silo</option>
<option value="301">Silo 301</option>
<option value="302">Silo 302</option>
<option value="303">Silo 303</option>
<option value="304">Silo 304</option>
<option value="305">Silo 305</option>
<option value="306">Silo 306</option>
<option value="307">Silo 307</option>
<option value="308">Silo 308</option>
</select>
</div>
<div class="hidden" id="celda_selector_container">
<label class="label-text block" for="celda_selector">Celda</label>
<select class="input-field form-select" id="celda_selector" name="celda_selector">
<option value="">Seleccionar Celda</option>
<option value="1">Celda 1</option>
<option value="2">Celda 2</option>
<option value="3">Celda 3</option>
</select>
</div>
<div>
  <label class="label-text block" for="mercaderia">Mercadería</label>
  <select class="input-field form-select" id="mercaderia" name="mercaderia" required>
    <option value="">Seleccionar Mercadería</option>
    <option value="maiz">Maíz</option>
    <option value="trigo">Trigo</option>
    <option value="soja">Soja</option>
    <option value="girasol">Girasol</option>
    <option value="cebada">Cebada</option>
    <option value="sorgo">Sorgo</option>
  </select>
</div>
<div class="pt-4 flex justify-end">
<button class="btn-primary flex items-center justify-center rounded-lg h-12 px-6 text-base font-bold leading-normal tracking-wide w-full sm:w-auto" type="submit">
<span class="material-icons-outlined mr-2">play_arrow</span>
                  Iniciar Operación
                </button>
</div>
</form>
</div>
</main>
<footer id="footer"></footer>
</div>
</div>
<div id="modalOperacionEnCurso" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
  <div class="bg-white rounded-xl shadow-xl p-8 max-w-sm w-full text-center">
    <span class="material-icons-outlined text-[var(--primary-color)] text-5xl mb-2">warning</span>
    <h3 class="text-xl font-bold mb-2">Operación en curso</h3>
    <p class="text-[var(--text-secondary)] mb-4">Ya tienes una operación activa. Debes finalizarla antes de iniciar una nueva.</p>
    <button id="cerrarModalOperacion" class="btn-primary rounded-lg px-6 h-10 font-bold">Entendido</button>
  </div>
</div>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script type="module" src="index.js"></script>
<script>
      // Basic dropdown toggle for user menu (optional)
      const userMenuButton = document.getElementById('user-menu-button');
      const userDropdown = document.getElementById('user-dropdown');
      if (userMenuButton && userDropdown) {
        userMenuButton.addEventListener('click', () => {
          userDropdown.classList.toggle('hidden');
        });
        // Close dropdown if clicked outside
        document.addEventListener('click', (event) => {
          if (!userMenuButton.contains(event.target) && !userDropdown.contains(event.target)) {
            userDropdown.classList.add('hidden');
          }
        });
      }
      // Conditional display for Silo/Celda selectors
      const areaTipoSelect = document.getElementById('area_tipo');
      const siloSelectorContainer = document.getElementById('silo_selector_container');
      const celdaSelectorContainer = document.getElementById('celda_selector_container');
      if (areaTipoSelect && siloSelectorContainer && celdaSelectorContainer) {
        areaTipoSelect.addEventListener('change', function() {
          if (this.value === 'silo') {
            siloSelectorContainer.classList.remove('hidden');
            celdaSelectorContainer.classList.add('hidden');
          } else if (this.value === 'celda') {
            celdaSelectorContainer.classList.remove('hidden');
            siloSelectorContainer.classList.add('hidden');
          } else {
            siloSelectorContainer.classList.add('hidden');
            celdaSelectorContainer.classList.add('hidden');
          }
        });
      }
    </script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const closeMobileMenu = document.getElementById('closeMobileMenu');
    const overlay = document.getElementById('mobileMenuOverlay');
    const logoutMobile = document.getElementById('logoutMobile');
    if (hamburgerBtn && mobileMenu) {
      hamburgerBtn.onclick = () => mobileMenu.classList.remove('hidden');
    }
    if (closeMobileMenu && mobileMenu) {
      closeMobileMenu.onclick = () => mobileMenu.classList.add('hidden');
    }
    if (overlay && mobileMenu) {
      overlay.onclick = () => mobileMenu.classList.add('hidden');
    }
    // Cerrar menú al hacer click en un link
    if (mobileMenu) {
      mobileMenu.querySelectorAll('a').forEach(link => {
        link.onclick = () => mobileMenu.classList.add('hidden');
      });
    }
    // Logout desde el menú mobile
    if (logoutMobile) {
      logoutMobile.onclick = () => {
        localStorage.removeItem('user');
        window.location.href = '../login/login.html';
      };
    }
  });
</script>
</body>
</html>
